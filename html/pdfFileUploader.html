<html>
<head>
    <title>Upload PDF file</title>
</head>
<body>
<form id="uploadForm"
      enctype="multipart/form-data"
      action="/api/pdf"
      method="post">
    <input type="file" name="userPaper" /><br>
    <input type="submit" value="Upload PDF" name="submit">
    <span id = "status"></span>
</form>
<br>
<input type=button value=Close onClick="window.open('', '_self', ''); window.close();">
</body>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery.form/3.51/jquery.form.min.js"></script>
<script>
    $(document).ready(function() {

        $('#uploadForm').submit(function() {
            $("#status").empty().text("File is uploading...");

            $(this).ajaxSubmit({

                error: function(xhr) {
                    status('Error: ' + xhr.status);
                },

                success: function(response) {
                    $("#status").empty().text("File stored successfully: " +response);
                    window.opener.setPDFFilePath(response);
                },
                fail: function(error) {
                    alert("ERROR : " + error);
                }
            });

            return false;
        });
    });

    function getURLParameter(name) {
        return decodeURI(
            (RegExp(name + '=' + '(.+?)(&|$)').exec(location.search)||[,null])[1]
        );
    }
</script>
</html>
